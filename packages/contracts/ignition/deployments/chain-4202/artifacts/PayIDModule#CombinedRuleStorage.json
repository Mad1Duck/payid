{
  "_format": "hh3-artifact-1",
  "contractName": "CombinedRuleStorage",
  "sourceName": "contracts/CombinedRuleStorage.sol",
  "abi": [
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "ruleSetHash",
          "type": "bytes32"
        }
      ],
      "name": "CombinedRuleDeactivated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "ruleSetHash",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "oldOwner",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "CombinedRuleOwnershipSynced",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "ruleSetHash",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint64",
          "name": "version",
          "type": "uint64"
        }
      ],
      "name": "CombinedRuleRegistered",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "MAX_RULES",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "activeRuleOf",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "deactivateMyCombinedRule",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "getActiveRuleOf",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "ruleSetHash",
          "type": "bytes32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "ruleSetHash",
          "type": "bytes32"
        }
      ],
      "name": "getRuleByHash",
      "outputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "components": [
            {
              "internalType": "address",
              "name": "ruleNFT",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "tokenId",
              "type": "uint256"
            }
          ],
          "internalType": "struct CombinedRuleStorage.RuleRef[]",
          "name": "ruleRefs",
          "type": "tuple[]"
        },
        {
          "internalType": "uint64",
          "name": "version",
          "type": "uint64"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "ruleSetHash",
          "type": "bytes32"
        }
      ],
      "name": "isActive",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "listAllRuleSetHashes",
      "outputs": [
        {
          "internalType": "bytes32[]",
          "name": "",
          "type": "bytes32[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "ruleSetHash",
          "type": "bytes32"
        },
        {
          "internalType": "address[]",
          "name": "ruleNFTs",
          "type": "address[]"
        },
        {
          "internalType": "uint256[]",
          "name": "tokenIds",
          "type": "uint256[]"
        },
        {
          "internalType": "uint64",
          "name": "version",
          "type": "uint64"
        }
      ],
      "name": "registerCombinedRule",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "ruleSetHash",
          "type": "bytes32"
        }
      ],
      "name": "syncOwner",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x6080604052348015600e575f5ffd5b50610d748061001c5f395ff3fe608060405234801561000f575f5ffd5b5060043610610090575f3560e01c80637d345996116100635780637d345996146101185780637f9f40131461014557806380a4bdce146101585780639ec296f21461016d578063fbbb237714610175575f5ffd5b80630eb7798a1461009457806330c27641146100bf5780635c36901c146100d45780636c96598a14610110575b5f5ffd5b6100a76100a2366004610b24565b610188565b6040516100b693929190610b3b565b60405180910390f35b6100d26100cd366004610b24565b610288565b005b6101006100e2366004610b24565b5f90815260208190526040902060030154600160401b900460ff1690565b60405190151581526020016100b6565b6100d2610576565b610137610126366004610bcc565b60016020525f908152604090205481565b6040519081526020016100b6565b610137610153366004610bcc565b610616565b610160610671565b6040516100b69190610bee565b610137600a81565b6100d2610183366004610c78565b6106c7565b5f81815260208190526040812060038101546060918391600160401b900460ff166101ec5760405162461bcd60e51b815260206004820152600f60248201526e52554c455f4e4f545f41435449564560881b60448201526064015b60405180910390fd5b80546003820154600283018054604080516020808402820181019092528281526001600160a01b0390951694929367ffffffffffffffff16929184915f9084015b82821015610274575f848152602090819020604080518082019091526002850290910180546001600160a01b0316825260019081015482840152908352909201910161022d565b505050509150935093509350509193909250565b5f8181526020819052604090206003810154600160401b900460ff166102e25760405162461bcd60e51b815260206004820152600f60248201526e52554c455f4e4f545f41435449564560881b60448201526064016101e3565b5f816002015f815481106102f8576102f8610d0f565b5f918252602082206002918202015490840180546001600160a01b0390921692636352211e9261032a5761032a610d0f565b905f5260205f209060020201600101546040518263ffffffff1660e01b815260040161035891815260200190565b602060405180830381865afa158015610373573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906103979190610d23565b905060015b60028301548110156104ca57816001600160a01b03168360020182815481106103c7576103c7610d0f565b5f91825260209091206002918202015490850180546001600160a01b0390921691636352211e9190859081106103ff576103ff610d0f565b905f5260205f209060020201600101546040518263ffffffff1660e01b815260040161042d91815260200190565b602060405180830381865afa158015610448573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061046c9190610d23565b6001600160a01b0316146104c25760405162461bcd60e51b815260206004820152601860248201527f52554c455f4e46545f4f574e4552534849505f53504c4954000000000000000060448201526064016101e3565b60010161039c565b5081546001600160a01b038281169116146105715781546001600160a01b03165f81815260016020526040902054849003610518576001600160a01b0381165f908152600160205260408120555b82546001600160a01b0319166001600160a01b0383811691821785555f82815260016020526040808220889055519184169187917f81a14da867dd8594091cc0b22b62b01d741e9dcc1b568b619850000ce29b83eb91a4505b505050565b335f90815260016020526040902054806105c35760405162461bcd60e51b815260206004820152600e60248201526d4e4f5f4143544956455f52554c4560901b60448201526064016101e3565b5f81815260208181526040808320600301805460ff60401b1916905533835260019091528082208290555182917fd0628cd5bd285fc434b5130be6fb4a9bdaeb0edc5e04907b28dd41696ef3ec0f91a250565b6001600160a01b0381165f908152600160205260409020548061066c5760405162461bcd60e51b815260206004820152600e60248201526d4e4f5f4143544956455f52554c4560901b60448201526064016101e3565b919050565b606060028054806020026020016040519081016040528092919081815260200182805480156106bd57602002820191905f5260205f20905b8154815260200190600101908083116106a9575b5050505050905090565b856107035760405162461bcd60e51b815260206004820152600c60248201526b0929cac82989288be9082a6960a31b60448201526064016101e3565b836107415760405162461bcd60e51b815260206004820152600e60248201526d115354151657d495531157d4d15560921b60448201526064016101e3565b600a8411156107815760405162461bcd60e51b815260206004820152600c60248201526b4d41585f31305f52554c455360a01b60448201526064016101e3565b8382146107c85760405162461bcd60e51b8152602060048201526015602482015274082a4a482b2be988a9c8ea890be9a92a69a82a8869605b1b60448201526064016101e3565b335f908152600160205260409020548015610820575f81815260208190526040808220600301805460ff60401b191690555182917fd0628cd5bd285fc434b5130be6fb4a9bdaeb0edc5e04907b28dd41696ef3ec0f91a25b5f8781526003602052604090205460ff16610882575f878152600360205260408120805460ff191660019081179091556002805491820181559091527f405787fa12a823e0f2b7631cc41b3ba8828b3321ca811111fa75cd3aa3bb5ace018790555b5f8781526020819052604081209061089e906002830190610ada565b5f5b86811015610a4957338888838181106108bb576108bb610d0f565b90506020020160208101906108d09190610bcc565b6001600160a01b0316636352211e8888858181106108f0576108f0610d0f565b905060200201356040518263ffffffff1660e01b815260040161091591815260200190565b602060405180830381865afa158015610930573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906109549190610d23565b6001600160a01b03161461099f5760405162461bcd60e51b81526020600482015260126024820152712727aa2fa92aa622afa7232a2fa7aba722a960711b60448201526064016101e3565b8160020160405180604001604052808a8a858181106109c0576109c0610d0f565b90506020020160208101906109d59190610bcc565b6001600160a01b031681526020018888858181106109f5576109f5610d0f565b602090810292909201359092528354600180820186555f95865294829020845160029092020180546001600160a01b0319166001600160a01b039092169190911781559201519183019190915550016108a0565b5080546001600160a01b03191633908117825560018083018a905560038301805468ffffffffffffffffff191667ffffffffffffffff8716908117600160401b179091555f83815260209283526040908190208c9055519081528a917f8575d2f640993a1ca4150f6861b6dd158ca55829ddd4eba68889b372cbf0efdb910160405180910390a35050505050505050565b5080545f8255600202905f5260205f2090810190610af89190610afb565b50565b5b80821115610b205780546001600160a01b03191681555f6001820155600201610afc565b5090565b5f60208284031215610b34575f5ffd5b5035919050565b6001600160a01b03841681526060602080830182905284519183018290525f91908501906080840190835b81811015610b9957835180516001600160a01b031684526020908101518185015290930192604090920191600101610b66565b5050809250505067ffffffffffffffff83166040830152949350505050565b6001600160a01b0381168114610af8575f5ffd5b5f60208284031215610bdc575f5ffd5b8135610be781610bb8565b9392505050565b602080825282518282018190525f918401906040840190835b81811015610c25578351835260209384019390920191600101610c07565b509095945050505050565b5f5f83601f840112610c40575f5ffd5b50813567ffffffffffffffff811115610c57575f5ffd5b6020830191508360208260051b8501011115610c71575f5ffd5b9250929050565b5f5f5f5f5f5f60808789031215610c8d575f5ffd5b86359550602087013567ffffffffffffffff811115610caa575f5ffd5b610cb689828a01610c30565b909650945050604087013567ffffffffffffffff811115610cd5575f5ffd5b610ce189828a01610c30565b909450925050606087013567ffffffffffffffff81168114610d01575f5ffd5b809150509295509295509295565b634e487b7160e01b5f52603260045260245ffd5b5f60208284031215610d33575f5ffd5b8151610be781610bb856fea26469706673582212202357038176ca24b79cdc4cddeb90311aa41e990558d7f37697c1c4f814420a2564736f6c634300081c0033",
  "deployedBytecode": "0x608060405234801561000f575f5ffd5b5060043610610090575f3560e01c80637d345996116100635780637d345996146101185780637f9f40131461014557806380a4bdce146101585780639ec296f21461016d578063fbbb237714610175575f5ffd5b80630eb7798a1461009457806330c27641146100bf5780635c36901c146100d45780636c96598a14610110575b5f5ffd5b6100a76100a2366004610b24565b610188565b6040516100b693929190610b3b565b60405180910390f35b6100d26100cd366004610b24565b610288565b005b6101006100e2366004610b24565b5f90815260208190526040902060030154600160401b900460ff1690565b60405190151581526020016100b6565b6100d2610576565b610137610126366004610bcc565b60016020525f908152604090205481565b6040519081526020016100b6565b610137610153366004610bcc565b610616565b610160610671565b6040516100b69190610bee565b610137600a81565b6100d2610183366004610c78565b6106c7565b5f81815260208190526040812060038101546060918391600160401b900460ff166101ec5760405162461bcd60e51b815260206004820152600f60248201526e52554c455f4e4f545f41435449564560881b60448201526064015b60405180910390fd5b80546003820154600283018054604080516020808402820181019092528281526001600160a01b0390951694929367ffffffffffffffff16929184915f9084015b82821015610274575f848152602090819020604080518082019091526002850290910180546001600160a01b0316825260019081015482840152908352909201910161022d565b505050509150935093509350509193909250565b5f8181526020819052604090206003810154600160401b900460ff166102e25760405162461bcd60e51b815260206004820152600f60248201526e52554c455f4e4f545f41435449564560881b60448201526064016101e3565b5f816002015f815481106102f8576102f8610d0f565b5f918252602082206002918202015490840180546001600160a01b0390921692636352211e9261032a5761032a610d0f565b905f5260205f209060020201600101546040518263ffffffff1660e01b815260040161035891815260200190565b602060405180830381865afa158015610373573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906103979190610d23565b905060015b60028301548110156104ca57816001600160a01b03168360020182815481106103c7576103c7610d0f565b5f91825260209091206002918202015490850180546001600160a01b0390921691636352211e9190859081106103ff576103ff610d0f565b905f5260205f209060020201600101546040518263ffffffff1660e01b815260040161042d91815260200190565b602060405180830381865afa158015610448573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061046c9190610d23565b6001600160a01b0316146104c25760405162461bcd60e51b815260206004820152601860248201527f52554c455f4e46545f4f574e4552534849505f53504c4954000000000000000060448201526064016101e3565b60010161039c565b5081546001600160a01b038281169116146105715781546001600160a01b03165f81815260016020526040902054849003610518576001600160a01b0381165f908152600160205260408120555b82546001600160a01b0319166001600160a01b0383811691821785555f82815260016020526040808220889055519184169187917f81a14da867dd8594091cc0b22b62b01d741e9dcc1b568b619850000ce29b83eb91a4505b505050565b335f90815260016020526040902054806105c35760405162461bcd60e51b815260206004820152600e60248201526d4e4f5f4143544956455f52554c4560901b60448201526064016101e3565b5f81815260208181526040808320600301805460ff60401b1916905533835260019091528082208290555182917fd0628cd5bd285fc434b5130be6fb4a9bdaeb0edc5e04907b28dd41696ef3ec0f91a250565b6001600160a01b0381165f908152600160205260409020548061066c5760405162461bcd60e51b815260206004820152600e60248201526d4e4f5f4143544956455f52554c4560901b60448201526064016101e3565b919050565b606060028054806020026020016040519081016040528092919081815260200182805480156106bd57602002820191905f5260205f20905b8154815260200190600101908083116106a9575b5050505050905090565b856107035760405162461bcd60e51b815260206004820152600c60248201526b0929cac82989288be9082a6960a31b60448201526064016101e3565b836107415760405162461bcd60e51b815260206004820152600e60248201526d115354151657d495531157d4d15560921b60448201526064016101e3565b600a8411156107815760405162461bcd60e51b815260206004820152600c60248201526b4d41585f31305f52554c455360a01b60448201526064016101e3565b8382146107c85760405162461bcd60e51b8152602060048201526015602482015274082a4a482b2be988a9c8ea890be9a92a69a82a8869605b1b60448201526064016101e3565b335f908152600160205260409020548015610820575f81815260208190526040808220600301805460ff60401b191690555182917fd0628cd5bd285fc434b5130be6fb4a9bdaeb0edc5e04907b28dd41696ef3ec0f91a25b5f8781526003602052604090205460ff16610882575f878152600360205260408120805460ff191660019081179091556002805491820181559091527f405787fa12a823e0f2b7631cc41b3ba8828b3321ca811111fa75cd3aa3bb5ace018790555b5f8781526020819052604081209061089e906002830190610ada565b5f5b86811015610a4957338888838181106108bb576108bb610d0f565b90506020020160208101906108d09190610bcc565b6001600160a01b0316636352211e8888858181106108f0576108f0610d0f565b905060200201356040518263ffffffff1660e01b815260040161091591815260200190565b602060405180830381865afa158015610930573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906109549190610d23565b6001600160a01b03161461099f5760405162461bcd60e51b81526020600482015260126024820152712727aa2fa92aa622afa7232a2fa7aba722a960711b60448201526064016101e3565b8160020160405180604001604052808a8a858181106109c0576109c0610d0f565b90506020020160208101906109d59190610bcc565b6001600160a01b031681526020018888858181106109f5576109f5610d0f565b602090810292909201359092528354600180820186555f95865294829020845160029092020180546001600160a01b0319166001600160a01b039092169190911781559201519183019190915550016108a0565b5080546001600160a01b03191633908117825560018083018a905560038301805468ffffffffffffffffff191667ffffffffffffffff8716908117600160401b179091555f83815260209283526040908190208c9055519081528a917f8575d2f640993a1ca4150f6861b6dd158ca55829ddd4eba68889b372cbf0efdb910160405180910390a35050505050505050565b5080545f8255600202905f5260205f2090810190610af89190610afb565b50565b5b80821115610b205780546001600160a01b03191681555f6001820155600201610afc565b5090565b5f60208284031215610b34575f5ffd5b5035919050565b6001600160a01b03841681526060602080830182905284519183018290525f91908501906080840190835b81811015610b9957835180516001600160a01b031684526020908101518185015290930192604090920191600101610b66565b5050809250505067ffffffffffffffff83166040830152949350505050565b6001600160a01b0381168114610af8575f5ffd5b5f60208284031215610bdc575f5ffd5b8135610be781610bb8565b9392505050565b602080825282518282018190525f918401906040840190835b81811015610c25578351835260209384019390920191600101610c07565b509095945050505050565b5f5f83601f840112610c40575f5ffd5b50813567ffffffffffffffff811115610c57575f5ffd5b6020830191508360208260051b8501011115610c71575f5ffd5b9250929050565b5f5f5f5f5f5f60808789031215610c8d575f5ffd5b86359550602087013567ffffffffffffffff811115610caa575f5ffd5b610cb689828a01610c30565b909650945050604087013567ffffffffffffffff811115610cd5575f5ffd5b610ce189828a01610c30565b909450925050606087013567ffffffffffffffff81168114610d01575f5ffd5b809150509295509295509295565b634e487b7160e01b5f52603260045260245ffd5b5f60208284031215610d33575f5ffd5b8151610be781610bb856fea26469706673582212202357038176ca24b79cdc4cddeb90311aa41e990558d7f37697c1c4f814420a2564736f6c634300081c0033",
  "linkReferences": {},
  "deployedLinkReferences": {},
  "immutableReferences": {},
  "inputSourceName": "project/contracts/CombinedRuleStorage.sol",
  "buildInfoId": "solc-0_8_28-4244d5b2556080626f0daf8cc46b06f1bfcaaa23"
}